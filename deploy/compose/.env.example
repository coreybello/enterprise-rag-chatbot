# =============================================================================
# Enterprise RAG Chatbot Environment Configuration
# =============================================================================
# Copy this file to .env and customize the values for your deployment

# =============================================================================
# CORE APPLICATION SETTINGS
# =============================================================================
ENVIRONMENT=development
LOG_LEVEL=INFO
API_PREFIX=/api/v1
APP_PORT=8000

# Security
SECRET_KEY=your-super-secret-key-change-this-in-production
API_KEY_HEADER=X-API-Key
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8000
CORS_ALLOW_CREDENTIALS=true

# =============================================================================
# LLM PROVIDER CONFIGURATION
# =============================================================================
# Options: local, openrouter
LLM_PROVIDER=local

# OpenRouter Configuration (when LLM_PROVIDER=openrouter)
OPENROUTER_API_KEY=your-openrouter-api-key
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
OPENROUTER_DEFAULT_MODEL=microsoft/wizardlm-2-8x22b

# Local LLM Configuration (when LLM_PROVIDER=local)
DEFAULT_MODEL=microsoft/WizardLM-2-7B
VLLM_PORT=8001
VLLM_MODEL_NAME=microsoft/WizardLM-2-7B
VLLM_TENSOR_PARALLEL_SIZE=1
VLLM_GPU_MEMORY_UTILIZATION=0.9
VLLM_MAX_MODEL_LEN=4096
VLLM_DTYPE=auto
VLLM_TRUST_REMOTE_CODE=true
VLLM_SERVED_MODEL_NAME=wizardlm-2-7b

# =============================================================================
# EMBEDDINGS CONFIGURATION
# =============================================================================
# Options: openai, voyage, nomic
EMBEDDING_PROVIDER=openai
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSIONS=1536

# API Keys for different embedding providers
OPENAI_API_KEY=your-openai-api-key
VOYAGE_API_KEY=your-voyage-api-key
NOMIC_API_KEY=your-nomic-api-key

# =============================================================================
# VECTOR DATABASE CONFIGURATION
# =============================================================================
# Options: weaviate, milvus, pinecone, chroma
VECTOR_DB_PROVIDER=weaviate

# Weaviate Configuration
WEAVIATE_PORT=8080
WEAVIATE_GRPC_PORT=50051
WEAVIATE_API_KEY=
WEAVIATE_LOG_LEVEL=info
WEAVIATE_CLASS_NAME=Documents

# Alternative Vector DB Options
PINECONE_API_KEY=your-pinecone-api-key
PINECONE_ENVIRONMENT=your-pinecone-environment
MILVUS_HOST=localhost
MILVUS_PORT=19530

# =============================================================================
# MEMORY BACKEND CONFIGURATION
# =============================================================================
# Options: zep, mem0, none
MEMORY_PROVIDER=zep

# Zep Configuration
ZEP_PORT=8002
ZEP_API_KEY=your-zep-api-key
ZEP_AUTH_SECRET=your-zep-secret-key
ZEP_DB_PASSWORD=zep_password
ZEP_LOG_LEVEL=info
ZEP_DEVELOPMENT=false

# Mem0 Configuration
MEM0_API_KEY=your-mem0-api-key

# =============================================================================
# OBSERVABILITY CONFIGURATION
# =============================================================================
# Options: langfuse, phoenix, none
OBSERVABILITY_PROVIDER=langfuse

# Langfuse Configuration
LANGFUSE_PORT=3000
LANGFUSE_SECRET_KEY=your-langfuse-secret-key
LANGFUSE_PUBLIC_KEY=your-langfuse-public-key
LANGFUSE_DB_PASSWORD=langfuse_password
LANGFUSE_NEXTAUTH_SECRET=your-nextauth-secret
LANGFUSE_SALT=your-salt
LANGFUSE_ENCRYPTION_KEY=your-encryption-key
LANGFUSE_NEXTAUTH_URL=http://localhost:3000
LANGFUSE_TELEMETRY_ENABLED=true
LANGFUSE_ENABLE_EXPERIMENTAL_FEATURES=false

# Phoenix Configuration
PHOENIX_PORT=6006
PHOENIX_HOST=localhost

# =============================================================================
# GUARDRAILS & CONTENT FILTERING
# =============================================================================
GUARDRAILS_ENABLED=true
PII_DETECTION_ENABLED=true
CONTENT_FILTERING_ENABLED=true
CITATION_REQUIRED=true
ABSTAIN_THRESHOLD=0.5

# Content filtering settings
BLOCKED_TOPICS=violence,adult-content,illegal-activities
ALLOWED_FILE_TYPES=pdf,docx,txt,md,html,csv
MAX_FILE_SIZE_MB=50

# PII Detection
PII_ENTITIES=PERSON,EMAIL,PHONE,SSN,CREDIT_CARD
PII_REDACTION_ENABLED=true
PII_REDACTION_CHAR=*

# =============================================================================
# RETRIEVAL & RAG CONFIGURATION
# =============================================================================
# Chunking
CHUNK_SIZE=512
CHUNK_OVERLAP=50
MIN_CHUNK_SIZE=100
MAX_CHUNK_SIZE=2000

# Retrieval
TOP_K_RETRIEVAL=5
SIMILARITY_THRESHOLD=0.7
RERANKING_ENABLED=true
RERANKING_TOP_K=10
HYBRID_SEARCH_ENABLED=false

# Generation
MAX_TOKENS=2048
TEMPERATURE=0.1
TOP_P=0.9
FREQUENCY_PENALTY=0.0
PRESENCE_PENALTY=0.0

# Context Management
MAX_CONTEXT_LENGTH=8000
CONTEXT_WINDOW_OVERLAP=100

# =============================================================================
# PERFORMANCE & SCALING
# =============================================================================
MAX_CONCURRENT_REQUESTS=10
REQUEST_TIMEOUT=120
WORKER_TIMEOUT=300
KEEP_ALIVE_TIMEOUT=5

# Connection pooling
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# Cache settings
CACHE_TTL=3600
CACHE_MAX_SIZE=1000

# =============================================================================
# CACHING CONFIGURATION
# =============================================================================
# Redis Configuration (optional)
REDIS_PORT=6379
REDIS_HOST=redis
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TTL=3600

# =============================================================================
# DOCUMENT INGESTION
# =============================================================================
# File processing
PARALLEL_PROCESSING=true
MAX_WORKERS=4
BATCH_SIZE=100

# Document processing
OCR_ENABLED=true
TABLE_EXTRACTION_ENABLED=true
IMAGE_EXTRACTION_ENABLED=true

# Metadata extraction
EXTRACT_AUTHOR=true
EXTRACT_TITLE=true
EXTRACT_CREATION_DATE=true
EXTRACT_KEYWORDS=true

# =============================================================================
# EVALUATION & MONITORING
# =============================================================================
# Evaluation
EVAL_ENABLED=true
EVAL_DATASET_PATH=./data/eval/test_dataset.jsonl
EVAL_METRICS=faithfulness,groundedness,retrieval_precision,retrieval_recall

# Monitoring
METRICS_ENABLED=true
METRICS_PORT=9090
HEALTH_CHECK_INTERVAL=30

# Logging
LOG_FILE_PATH=./logs/app.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5
LOG_FORMAT=json

# =============================================================================
# SECURITY & COMPLIANCE
# =============================================================================
# Authentication
AUTH_ENABLED=false
JWT_SECRET=your-jwt-secret
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# HTTPS/TLS
TLS_ENABLED=false
TLS_CERT_PATH=./certs/cert.pem
TLS_KEY_PATH=./certs/key.pem

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=3600

# =============================================================================
# DATABASE PASSWORDS (CHANGE IN PRODUCTION!)
# =============================================================================
POSTGRES_PASSWORD=postgres_password
ZEP_DB_PASSWORD=zep_password
LANGFUSE_DB_PASSWORD=langfuse_password

# =============================================================================
# DOCKER COMPOSE PROFILES
# =============================================================================
# Profiles to enable/disable services
# Uncomment to enable specific services:
# COMPOSE_PROFILES=local-llm,cache
COMPOSE_PROFILES=local-llm

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================
# Only used in development mode
DEBUG=false
RELOAD=false
DEV_MODE=false

# Testing
TEST_DATABASE_URL=sqlite:///./test.db
TEST_MODE=false

# =============================================================================
# BACKUP & RECOVERY
# =============================================================================
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=your-backup-bucket
BACKUP_S3_REGION=us-east-1

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================
# Model quantization
MODEL_QUANTIZATION=none
QUANTIZATION_BITS=8

# GPU configuration
CUDA_VISIBLE_DEVICES=0
GPU_MEMORY_FRACTION=0.8

# Experimental features
ENABLE_EXPERIMENTAL_FEATURES=false
ENABLE_STREAMING=true
ENABLE_WEBSOCKETS=true